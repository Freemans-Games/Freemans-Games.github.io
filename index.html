<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Gladiator Games</title>

<style>
    :root{
      --deep-purple:#311433;
      --dark-purple:#1a0f29;
      --muted-purple:#2b1a3f;
      --gold:#D4AF37;
      --gold-2:#F0C94A;
      --text:#F8F5F2;
      --muted:#BFB3B0;
      --card:#24142b;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(180deg,var(--deep-purple) 0%, #2f1b3a 100%);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.35;
    }

    /* Header / Nav */
    header{
      position:sticky;top:0;z-index:100;
      background:linear-gradient(135deg,var(--muted-purple),var(--dark-purple));
      border-bottom:3px solid var(--gold);
      box-shadow:0 6px 18px rgba(212,175,55,0.18);
    }
    nav{
      max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:16px;
    }
    .logo{display:flex;align-items:center;gap:12px;cursor:pointer}
    .logo .icon{
      width:44px;height:44px;border-radius:8px;
      display:flex;align-items:center;justify-content:center;
      background:linear-gradient(180deg,#3b2350,#25112a);
      font-size:20px;box-shadow:0 6px 18px rgba(0,0,0,0.4);
      border:2px solid rgba(212,175,55,0.12);
    }
    .logo span{font-weight:700;letter-spacing:0.6px;color:var(--text);text-shadow:0 0 10px rgba(212,175,55,0.14)}
    .nav-links{list-style:none;display:flex;gap:18px}
    .nav-links a{
      color:var(--text);text-decoration:none;padding:6px 8px;border-radius:6px;position:relative;font-weight:600;font-size:15px;
      transition:all .18s;
    }
    .nav-links a.active, .nav-links a:hover{
      color:var(--dark-purple);background:var(--gold);box-shadow:0 6px 18px rgba(212,175,55,0.12);
    }

    main{max-width:1200px;margin:22px auto;padding:18px}
    .hero{
      background:linear-gradient(180deg,var(--card),#1b0e22);border-radius:14px;padding:44px 22px;margin-bottom:28px;border:3px solid var(--gold);
      box-shadow:0 14px 40px rgba(21,7,22,0.6);
      position:relative;overflow:hidden;
    }
    .hero::before{content:"‚öîÔ∏è";position:absolute;font-size:160px;opacity:0.04;left:50%;top:50%;transform:translate(-50%,-50%)}
    .hero h1{font-size:42px;margin-bottom:10px;text-shadow:0 0 10px rgba(212,175,55,0.2)}
    .hero p{color:var(--muted);margin-bottom:20px}

    .search-container{display:flex;gap:10px;max-width:760px;margin:0 auto}
    .search-box{
      flex:1;padding:14px 16px;border-radius:26px;border:2px solid rgba(212,175,55,0.18);
      background:transparent;color:var(--text);font-size:15px;
    }
    .search-box:focus{outline:none;box-shadow:0 6px 22px rgba(212,175,55,0.12)}
    .search-btn{padding:12px 20px;border-radius:26px;border:0;background:var(--gold);color:var(--dark-purple);font-weight:700;cursor:pointer}
    .search-btn:hover{background:var(--gold-2)}

    /* Stats */
    .stats{display:flex;gap:16px;justify-content:space-between;margin:26px 0;padding:22px;border-radius:12px;background:linear-gradient(180deg,var(--muted-purple),var(--card));border:3px solid var(--gold)}
    .stat-box{flex:1;text-align:center}
    .stat-number{font-size:36px;font-weight:800;color:var(--text);text-shadow:0 0 12px rgba(212,175,55,0.18)}
    .stat-label{color:var(--muted);margin-top:6px}

    /* Grid */
    .games-section h2{margin-bottom:14px}
    .games-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:18px}
    .game-box{
      background:linear-gradient(180deg,#231024,#1b0f22);padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);
      transition:all .22s;cursor:pointer;position:relative;overflow:hidden;
    }
    .game-box:hover{transform:translateY(-8px);box-shadow:0 18px 40px rgba(0,0,0,0.6);border-color:rgba(212,175,55,0.22)}
    .game-icon{width:100px;height:100px;margin:0 auto 12px;border-radius:10px;background-size:cover;background-position:center;box-shadow:0 10px 30px rgba(0,0,0,0.6)}
    .game-box h3{font-size:18px;margin-bottom:6px;text-align:center}
    .game-box p{color:var(--muted);text-align:center;margin-bottom:12px}

    .play-button{width:100%;padding:10px;border-radius:24px;border:0;background:var(--gold);color:var(--dark-purple);font-weight:800;cursor:pointer}
    .play-button:hover{background:var(--gold-2);transform:scale(1.03)}

    /* Filters */
    .filter-section{margin-bottom:18px}
    .filters{display:flex;gap:10px;flex-wrap:wrap}
    .filter-btn{padding:8px 18px;border-radius:22px;border:2px solid rgba(255,255,255,0.03);background:transparent;color:var(--text);cursor:pointer}
    .filter-btn.active{background:var(--gold);color:var(--dark-purple);border-color:var(--gold)}

    /* footer */
    footer{margin-top:34px;padding:28px;text-align:center;border-top:3px solid var(--gold);background:linear-gradient(180deg,#16061a,#120414);color:var(--muted)}

    /* Game frame overlay */
    .game-frame-container{
      position:fixed;inset:0;background:rgba(0,0,0,0.92);display:none;flex-direction:column;z-index:1200;
    }
    .game-frame-container.active{display:flex}
    .game-header{display:flex;align-items:center;justify-content:space-between;padding:14px 20px;background:linear-gradient(180deg,var(--muted-purple),var(--dark-purple));border-bottom:3px solid var(--gold)}
    .game-title{display:flex;align-items:center;gap:12px;font-weight:700}
    .game-title .mini{width:42px;height:42px;border-radius:8px;background:linear-gradient(180deg,#3b2350,#25112a);display:flex;align-items:center;justify-content:center;font-size:18px}
    .close-btn{background:var(--gold);border:0;padding:10px 16px;border-radius:20px;font-weight:700;cursor:pointer}
    .game-iframe{flex:1;width:100%;border:0;background:#000}

    /* loading & fallback */
    .loading{padding:28px;text-align:center;color:var(--muted)}
    .notice{padding:18px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);color:var(--muted);margin-bottom:14px}
    .manual-add{display:flex;gap:8px;margin-top:8px}
    .manual-add input{flex:1;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--text)}
    .manual-add button{padding:8px 12px;border-radius:8px;border:0;background:var(--gold);color:var(--dark-purple);cursor:pointer}

    @media (max-width:720px){
      .nav-links{display:none}
      nav{padding:12px}
      .hero h1{font-size:28px}
      .search-container{flex-direction:column}
      .stats{flex-direction:column;gap:12px}
    }
</style>
</head>
<body>
  <header>
    <nav>
      <div class="logo" onclick="navigateTo('home')">
        <div class="icon">üõ°Ô∏è</div>
        <span>GLADIATOR GAMES</span>
      </div>

      <ul class="nav-links">
        <li><a onclick="navigateTo('home')" class="active" data-page="home">üèõÔ∏è Home</a></li>
        <li><a onclick="navigateTo('games')" data-page="games">‚öîÔ∏è Games</a></li>>
      </ul>
    </nav>
  </header>

  <main>
    <!-- Home -->
    <div id="home" class="page active">
      <section class="hero">
        <h1>‚öîÔ∏è Gladiator Games ‚öîÔ∏è</h1>
        <p>Battle in quick, free browser games ‚Äî sharpen your skill and rise to the arena!</p>

        <div class="search-container">
          <input id="homeSearch" class="search-box" placeholder="Search for games..." />
          <button class="search-btn" onclick="searchGames('homeSearch')">üîç Search</button>
        </div>
      </section>

      <div class="stats" aria-hidden="false">
        <div class="stat-box">
          <div class="stat-number" id="totalGames">0</div>
          <div class="stat-label">Total Games</div>
        </div>
        <div class="stat-box">
          <div class="stat-number" id="popularGames">0</div>
          <div class="stat-label">Popular Games</div>
        </div>
        <div class="stat-box">
          <div class="stat-number" id="newGames">0</div>
          <div class="stat-label">New This Week</div>
        </div>
      </div>

      <section class="games-section">
        <h2>üèõÔ∏è Featured Games</h2>
        <div class="games-container" id="featuredGames">
          <div class="loading">Loading games...</div>
        </div>
      </section>
    </div>

    <!-- All Games -->
    <div id="games" class="page" style="display:none">
      <section class="filter-section">
        <h2>‚öîÔ∏è All Games</h2>

        <div style="max-width:100%;margin-bottom:16px;">
          <input id="gamesSearch" class="search-box" placeholder="Search games..." oninput="filterGames()" />
        </div>

        <div class="filters">
          <button class="filter-btn active" onclick="filterByCategory('all', this)">All</button>
        </div>
      </section>

      <section class="games-section">
        <div class="games-container" id="allGames">
          <div class="loading">Loading games...</div>
        </div>

        <div id="noGamesNotice" class="notice" style="display:none;">
          No games found. You can either:
          <ul style="margin:8px 0 0 18px;">
            <li>Add a <code>games.json</code> (array of objects with <code>name</code>, <code>directory</code>, and <code>image</code>) next to this page.</li>
            <li>Or manually add a game below (this updates the current view only).</li>
          </ul>

          <div class="manual-add" style="margin-top:10px;">
            <input id="manualName" placeholder="Game name (e.g. Gladiator One)" />
            <input id="manualDir" placeholder="Directory name (e.g. gladiator-one)" />
            <input id="manualImage" placeholder="Image filename (e.g. game.png)" />
            <button onclick="manualAdd()">Add</button>
          </div>
        </div>
      </section>
    </div>

    <!-- Popular -->
    <div id="popular" class="page" style="display:none">
      <section class="games-section">
        <h2>üî• Most Popular</h2>
        <p style="color:var(--muted);margin-bottom:16px">These are the arena favorites.</p>
        <div class="games-container" id="popularGamesContainer">
          <div class="loading">Loading popular games...</div>
        </div>
      </section>
    </div>

    <!-- New -->
    <div id="new" class="page" style="display:none">
      <section class="games-section">
        <h2>‚ú® New Entries</h2>
        <p style="color:var(--muted);margin-bottom:16px">Fresh to the sands this week.</p>
        <div class="games-container" id="newGamesContainer">
          <div class="loading">Loading new games...</div>
        </div>
      </section>
    </div>
  </main>

  <footer>
    <div>‚öîÔ∏è Gladiator Games ‚öîÔ∏è</div>
    <div style="margin-top:8px;color:var(--muted)">All Games Stolen From GX-GamesCrack V2</div>
  </footer>

  <!-- Game Frame -->
  <div class="game-frame-container" id="gameFrame" aria-hidden="true">
    <div class="game-header">
      <div class="game-title">
        <div class="mini">üõ°Ô∏è</div>
        <div id="currentGameTitle">Game Title</div>
      </div>
      <button class="close-btn" onclick="closeGame()">‚úï Close</button>
    </div>
    <iframe class="game-iframe" id="gameIframe" sandbox="allow-scripts allow-same-origin allow-forms"></iframe>
  </div>

<script>
  // ---- Data & State ----
  let gamesDatabase = [];
  let currentCategory = 'all';
  let allGamesData = [];

  // ---- Utilities ----
  function setYear(){ document.getElementById('year').textContent = new Date().getFullYear(); }
  function safeText(str){ return String(str).replace(/[<>]/g,''); }
  function guessCategory(name){
    const n = (name||'').toLowerCase();
    if(!n) return 'action';
    if(n.includes('race')||n.includes('run')||n.includes('chariot')) return 'racing';
    if(n.includes('arena')||n.includes('gladi')) return 'arena';
    if(n.includes('strategy')||n.includes('tactic')) return 'strategy';
    return 'action';
  }

  // Return image URL (if provided) or fallback gradient style.
  function imageStyleFor(game){
    if(game.image){
      // Use provided image (relative path under semag/<dir>/<image>)
      const url = `semag/${encodeURIComponent(game.slug)}/${encodeURIComponent(game.image)}`;
      return `background-image: url('${url}'); background-size: cover; background-position: center;`;
    } else {
      const colors = {
        arena: 'linear-gradient(135deg,#5b1d4a,#2b0840)',
        action:'linear-gradient(135deg,#3c1840,#1a0f29)',
        racing:'linear-gradient(135deg,#45223f,#23112a)',
        strategy:'linear-gradient(135deg,#3b2240,#25112a)',
        default:'linear-gradient(135deg,#33203b,#1a0f29)'
      };
      const bg = colors[game.category] || colors.default;
      return `background: ${bg}; display:flex; align-items:center; justify-content:center; font-size:28px;`;
    }
  }

  // ---- Load games (tries games.json; no demo fallback) ----
  async function loadGamesFromJSON(){
    // clear placeholders
    document.getElementById('featuredGames').innerHTML = '<div class="loading">Loading games...</div>';
    document.getElementById('allGames').innerHTML = '<div class="loading">Loading games...</div>';
    document.getElementById('popularGamesContainer').innerHTML = '<div class="loading">Loading popular games...</div>';
    document.getElementById('newGamesContainer').innerHTML = '<div class="loading">Loading new games...</div>';
    document.getElementById('noGamesNotice').style.display = 'none';

    try{
      const res = await fetch('data/games.json');
      if(!res.ok) throw new Error('games.json not found or blocked');
      const games = await res.json();
      if(!Array.isArray(games) || games.length === 0) throw new Error('games.json empty');

      gamesDatabase = games.map((g, idx) => ({
        name: g.name || (`Game ${idx+1}`),
        slug: g.directory || g.slug || (`game-${idx+1}`),
        category: (g.category || guessCategory(g.name)).toLowerCase(),
        description: g.description || (`Play ${g.name} online!`),
        image: g.image || '',
        isPopular: !!g.isPopular,
        isNew: !!g.isNew,
        plays: Number.isFinite(g.plays) ? g.plays : Math.floor(Math.random()*15000)+1000
      }));

      allGamesData = [...gamesDatabase];
      loadFeaturedGames();
      updateStats();
    } catch(err){
      console.warn('Failed to load games.json:', err);
      // Show "no games" UI (no demo games)
      gamesDatabase = [];
      allGamesData = [];
      showNoGames();
    }
  }

  function showNoGames(){
    document.getElementById('featuredGames').innerHTML = '<div class="loading">No games found.</div>';
    document.getElementById('allGames').innerHTML = '<div class="loading">No games found.</div>';
    document.getElementById('popularGamesContainer').innerHTML = '<div class="loading">No games found.</div>';
    document.getElementById('newGamesContainer').innerHTML = '<div class="loading">No games found.</div>';
    document.getElementById('noGamesNotice').style.display = 'block';
    updateStats();
  }

  // ---- Rendering ----
  function createGameCard(game){
    const safeName = safeText(game.name);
    const imgStyle = imageStyleFor(game);
    const displayCategory = (game.category||'Action').charAt(0).toUpperCase() + (game.category||'action').slice(1);
    return `
      <div class="game-box" onclick="playGame('${encodeURIComponent(game.slug)}','${safeName}')">
        <div class="game-icon" style="${imgStyle}" aria-hidden="true">${game.image ? '' : displayCategory.charAt(0)}</div>
        <h3>${safeName}</h3>
        <p>${displayCategory}</p>
        <button class="play-button" onclick="event.stopPropagation(); playGame('${encodeURIComponent(game.slug)}','${safeName}')">‚ñ∂ Play Now</button>
      </div>
    `;
  }

  function loadFeaturedGames(){
    const featured = gamesDatabase.slice(0,6);
    const el = document.getElementById('featuredGames');
    if(!featured.length){ el.innerHTML = '<div class="loading">No featured games.</div>'; return;}
    el.innerHTML = featured.map(createGameCard).join('');
  }

  function loadAllGames(){
    const container = document.getElementById('allGames');
    const filtered = currentCategory === 'all' ? allGamesData : allGamesData.filter(g=>g.category===currentCategory);
    if(!filtered.length){ container.innerHTML = '<div class="loading">No games match your filters.</div>'; return; }
    container.innerHTML = filtered.map(createGameCard).join('');
  }

  function loadPopularGames(){
    const popular = gamesDatabase.filter(g=>g.isPopular).sort((a,b)=>b.plays-a.plays);
    const container = document.getElementById('popularGamesContainer');
    if(!popular.length){ container.innerHTML = '<div class="loading">No popular games yet.</div>'; return;}
    container.innerHTML = popular.map(createGameCard).join('');
  }

  function loadNewGames(){
    const newest = gamesDatabase.filter(g=>g.isNew);
    const container = document.getElementById('newGamesContainer');
    if(!newest.length){ container.innerHTML = '<div class="loading">No new games this week.</div>'; return;}
    container.innerHTML = newest.map(createGameCard).join('');
  }

  // ---- Interaction / Navigation ----
  function navigateTo(pageId){
    document.querySelectorAll('.page').forEach(p=>p.style.display='none');
    const page = document.getElementById(pageId);
    if(page) page.style.display = 'block';

    document.querySelectorAll('.nav-links a').forEach(a=>a.classList.remove('active'));
    const activeLink = document.querySelector(`[data-page="${pageId}"]`);
    if(activeLink) activeLink.classList.add('active');

    if(pageId==='home') loadFeaturedGames();
    if(pageId==='games') loadAllGames();
    if(pageId==='popular') loadPopularGames();
    if(pageId==='new') loadNewGames();
  }

  function filterByCategory(category, btn){
    currentCategory = category;
    document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
    if(btn) btn.classList.add('active');
    loadAllGames();
    navigateTo('games');
  }

  function filterGames(){
    const term = (document.getElementById('gamesSearch').value||'').toLowerCase().trim();
    allGamesData = gamesDatabase.filter(game => {
      return game.name.toLowerCase().includes(term) ||
             (game.description||'').toLowerCase().includes(term) ||
             (game.category||'').toLowerCase().includes(term);
    });
    loadAllGames();
  }

  function searchGames(inputId){
    const term = (document.getElementById(inputId).value||'').trim();
    if(!term) return;
    navigateTo('games');
    document.getElementById('gamesSearch').value = term;
    filterGames();
  }

  function updateStats(){
    document.getElementById('totalGames').textContent = gamesDatabase.length;
    document.getElementById('popularGames').textContent = gamesDatabase.filter(g=>g.isPopular).length;
    document.getElementById('newGames').textContent = gamesDatabase.filter(g=>g.isNew).length;
  }

  // ---- Play / Close Game ----
  function playGame(slug, name){
    const gameFrame = document.getElementById('gameFrame');
    const iframe = document.getElementById('gameIframe');
    const title = document.getElementById('currentGameTitle');
    title.textContent = safeText(name);
    iframe.src = `semag/${decodeURIComponent(slug)}/index.html`;
    gameFrame.classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  function closeGame(){
    const gameFrame = document.getElementById('gameFrame');
    const iframe = document.getElementById('gameIframe');
    gameFrame.classList.remove('active');
    iframe.src = '';
    document.body.style.overflow = 'auto';
  }

  // ---- Manual add (updates current view only) ----
  function manualAdd(){
    const name = document.getElementById('manualName').value.trim();
    const dir = document.getElementById('manualDir').value.trim();
    const img = document.getElementById('manualImage').value.trim();
    if(!name || !dir) return alert('Please provide name and directory.');
    const entry = { name, slug: dir, category: 'action', image: img, isPopular:false, isNew:false, plays:0, description: '' };
    gamesDatabase.push(entry);
    allGamesData = [...gamesDatabase];
    loadFeaturedGames();
    loadAllGames();
    updateStats();
    document.getElementById('manualName').value = '';
    document.getElementById('manualDir').value = '';
    document.getElementById('manualImage').value = '';
    document.getElementById('noGamesNotice').style.display = 'none';
  }

  // ---- Keyboard support ----
  document.addEventListener('keydown', (e) => {
    const active = document.activeElement;
    const isTyping = active && (active.tagName === 'INPUT' || active.tagName === 'TEXTAREA' || active.isContentEditable);
    if(e.key === '/' && !isTyping){
      const frame = document.getElementById('gameFrame');
      if(frame.classList.contains('active')) {
        closeGame();
        e.preventDefault();
        return;
      }
      try{ history.back(); }catch(err){}
      e.preventDefault();
    }

    if(e.key === 'Escape'){
      const frame = document.getElementById('gameFrame');
      if(frame.classList.contains('active')) closeGame();
    }
  });

  document.addEventListener('submit', (ev)=>{ ev.preventDefault(); });

  // ---- Init ----
  window.addEventListener('DOMContentLoaded', ()=>{
    setYear();
    loadGamesFromJSON();
    navigateTo('home');
    window.ggReload = () => { loadGamesFromJSON(); updateStats(); loadFeaturedGames(); };
  });
</script>
</body>
</html>

